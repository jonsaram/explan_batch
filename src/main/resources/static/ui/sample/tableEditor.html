<meta charset="utf-8">
<script type="text/javascript">
	var <@pageId> = {
		 brandId	: G_VAL.session.BRAND_ID
		,columnButtonFn : function(cellData, rowData) {
			dalert(rowData);
		 }
		,loadComponent : function(parm) {

			// Code List 읽어오기
			var group1CdList = C_COM.getBrandCodeList(<@pageId>.brandId, "STORE_MENU_GROUP1");

			let sendParm = {
				gridParm : {
					 tableName		: "TBL_EXP_SAMPLE2"
					,columnMap 		: {
						 "ITEM_ID" 		: { headerText : "아이템ID", hidden : "Y", ifNewAutoSet : "random"}  // ifNewAutoSet = "random" 인경우 값이 숨겨져 있기 때문에 새로운 Row Insert시 값 랜덤값 Setting
						,"ITEM1" 		: { headerText : "아이템1", columnType : "selectbox", useBrandCodeId : "STORE_MENU_GROUP1", smallSizeHideColumn : "Y", align : "right" /* tdClass="" */ }
						,"ITEM2" 		: { headerText : "아이템2", columnType : "button", buttonNm : "test", buttonFn : <@pageId>.columnButtonFn				}
						,"ITEM3" 		: { headerText : "아이템3", dataType   : "date", saveType : "text"}
					 }
					/*
					,addColumnMap	: {
					 }
					*/
					 // Header가 두줄인경우, 같은이름으로 Grouping한다.
					,headerTextGroup	: {
						"본사메뉴" : [ 
							 "ITEM2" 
							,"ITEM3"
						]
					 }
					,columnConfig 	: {
						 selectBoxCodeList 	: {
						 	//"ITEM1" : [["TEST1", "TTT1"], ["TEST2", "TTT2"]]
							 "ITEM1" : group1CdList
						 }
						,popupConfig		: {
							"ITEM2" : {
								 popupId 	: "sample_popup_popupSample"
								,parmFn 	: function() {}
								,resultFn	: function(gridObj, targetDom, resultData) {
									gridObj.setCell(targetDom, resultData);
								 }
							}
						 }
						/*
						,onClickCell		: function(column, rowData) {
							dalert(column)
						 }
						
						,onChangeCell : {
							"ITEM3"	: {
								func : function(gridObj, rowIdx, colIdx, cellObj, rowData) {
									gridObj.setCellToColumn(cellObj, "잘되나1", "ITEM2"	);
									gridObj.setCellToColumn(cellObj, "잘되나2", "ITEM3"	);
								}
							}
						 }
						,onClickCell		: function(tdDom) {
							dalert(tdDom)
						 }

						// Cell의 ViewText를 가공한다.						
						,makeCellViewData	: {
							"STOCK_RATE"	: function(cellText, rowData) {
								let result = Math.round(rowData.SUM_QUANTITY / rowData.AVG_QUANTITY *1000 ) / 10;
								
								if(isNumber(result)) 	result = result + "%";
								else					result = "";
								return result;
								
							 }
							,"STOCK_ANALY" 	: function(cellText, rowData) {
								let rate = Math.round(rowData.SUM_QUANTITY / rowData.AVG_QUANTITY *1000 ) / 10;
								
								let evaluation = C_STOCK.evaluationCriteriaOfStock(rate);

								return evaluation;
							}
						}
						,onDblClickCell : function(columnId, rowData) {
							<@popupId>.makeOrder(rowData)
							<@popupId>.reloadOrder();
							
						 }
						
						*/
					 }
					,rowConfig		: {
						/*
						onClickRow : function(rowObj) {
							let gridInstance = <@pageId>["<@pageId>_editor"].getGridInstance();
							let selectCells = gridInstance.getSelectedCells();
							dalert(selectCells);
							
						}
						*/
						onChangeCheckBoxState : function(trObj) {
							//dalert(trObj);
						 }
					 }
					/*
					,gridConfig : {
						width : ""	
					 }
					// Cell각각의 속성을 설정 한다.
					// key는 primaryKeyList값을 '_'로 연결한 값이다.
					// key로 row를 특정하고, columnId로 행을 특정하여 선택된 Cell의 속성을 설정한다.
					,cellConfig 	: {
						cellDataTypeList : [
							{ key : "olggt4g16ytjo6h3", columnId : "TOP_VAL", columnType : "selectbox", useCodeId : "PRODUCT_CLASS"	}							
						]
					 }
					*/
					,primaryKeyList		: ["ITEM_ID"]
					,searchColumnList	: ["ITEM_ID"]		// Table 지정인경우 적용
					,orderColumnList 	: ["ITEM_ID ASC"]				// Table 지정인경우 적용
					//,cellMergeList		: [["GRP_CODE_ID", "GRP_CODE_NM", 1]]
					//,defaultSetColumnMap: {"BUYER_ID" : G_VAL.session.BUYER_ID }	// 저장할때 특정 컬럼에 기본값을 설정해야 할경우 사용
					//,filterWhere		: `BUYER_ID = '${G_VAL.session.BUYER_ID}'`
					//,searchWhereMap		: { ITEM_ID : "ABCD" }										// 기본형 	: ITEM_ID = "ABCD"
					//,searchWhereMap		: { ITEM_ID : ["A", "B"] }									// IN 형	: ITEM_ID IN ("A", "B")
					//,searchWhereMap		: { ITEM_ID : {oper : ">", value : "1111"} }				// 비교형	: ITEM_ID > "1111"
					//,searchWhereMap		: { ITEM_ID : {type : "range", start : "A", end : "B"} }	// 범위형	: ITEM_ID > "A" AND ITEM_ID < "B"
					,checkbox			: "show"
					//,checkboxType		: "single"	// checkbox가 한개만 선택 하도록 설정
					//,allCheckHide		: "Y"
					//,ordernum			: "hide"
					//,readOnly			: "Y"
					//,updateOnly		: "Y"
					//,gridWidth		: "2000px"
					//,useRuntimeLoad		: 100										// Scroll을 하단으로 내리면 page단위로 실시간으로 추가 Data를 가져온다. 가져오는 Page단위 
					//,onLoad				: function(tableList) {
					//	dalert(tableList);
					//}
					//,readOnlyShowColumnList : ["STORE_NM", "ADDRESS", "REGION" ]	// readOnly인경우에만 보여주는 컬럼 목록 설정(나머지는 Hide)
					//,readOnlyHideColumnList : ["STORE_NM", "ADDRESS", "REGION" ]	// readOnly인경우에만 숨겨지는 컬럼 목록 설정
					
					
				 }
	       		//,noTitle 		: "Y"		// 상단 Title 사용 안함
           		//,noBreadcrumb	: "Y"		// Path Find 사용 안함.
           		//,noEdit		: "Y"		// Edit 버튼에 대한 Overide처리
           		//,subTitle		: "Sub Title"
           		//,frameHeight	: "200px"
				//,callbackEditButton : function(parm) {
				//	<@pageId>.openEditMultiTable();
				// }
				/*
				,optionConfig		: {
					searchComponentList : [
						 {
							 type			: "singleSelectBox"	
							,title			: "가맹점"
							,whereColumn	: "STORE_ID"
							,optionList 	: selectList
							,defaultVal		: G_VAL.current.storeId
							,onChange		: function(selectVal, thisObj) {
								G_VAL.current.storeId = selectVal;
								thisObj.reload();
							 }
						 }
					]
				 }
				*/
				,addButtonList : [
					{
						 title 		: "등록"
						,onClick	: function() {
							const parm = {
								 gridParm : sendParm.gridParm
								,gridHeaderTitle 	: "테스트 항목 등록"
								,popupTitle 		: "테스트 항목 등록"
							}
							C_POP.open("popup_common_oneEditGridPopup", parm, function(retData){
								<@compId>["<@compId>_tableGrid"].reload();
							});
						 }  
					}
				]
				
			}
			C_COMP.import("<@pageId>_editor", "component_compTableEditor",sendParm , function() {});		
		 }
	}
	// Page Load가 완료된후 실행 된다.
	C_PM.onLoadPage("<@pageId>", function(parm) {
		<@pageId>.loadComponent(parm);
	});
	// History back으로 이동해왔을 경우 이루틴이 실행된다.
	C_HM.onReturn("<@pageId>", function(pageId, data) {

	});
</script>
<page-component>
    <!-- table area start -->
	<compnent id="<@pageId>_editor"></compnent>    
    <!-- table area end -->
</page-component>