<meta charset="utf-8">
<script type="text/javascript">
	var <@pageId> = {
		 brandId	: G_VAL.session.BRAND_ID
		,loadComponent : function(selectList) {
			/*
			var parm = {
				 queryId 		: "common.getCompanyProductList"
				,requestParm	: {}
			}
			let resultData = C_COM.requestQuery(parm);
			
			let productList = C_COM.makeCodeList(resultData.data, "PRODUCT_CD", "PRODUCT_NM");
			*/
			
			
			let sendParm = {
				gridParm : {
					 requestQuery 	: {
						  queryId		: "headerManage.getStoreSalesMenuList"
						 ,requestParm	: {}
					 }	
					,tableName		: "TBL_EXP_STORE_MENU_SALES_MST"
					,columnMap 		: {
						  "MENU_SALES_ID"	: { headerText : "메뉴매출ID"				 , hidden 	: "Y", ifNewAutoSet : "random"	}
						 ,"STORE_ID"       	: { headerText : "지점ID"    				 , hidden 	: "Y", default : ()=>{ return G_VAL.current.storeId}	}
						 ,"STORE_NM"       	: { headerText : "지점명"    	,noSave : "Y", hidden 	: "Y"						}
						 ,"MENU_CD" 		: { headerText : "메뉴CD"   				 										}
						 ,"MENU_NM"       	: { headerText : "Mst메뉴명"    ,noSave : "Y", width  	: "150px", align : "left"	}
						 ,"STORE_MENU_NM" 	: { headerText : "메뉴명"    	,noSave : "Y", width  	: "150px", align : "left"	}
						 ,"YEAR"           	: { headerText : "년"        														}
						 ,"MONTH"          	: { headerText : "월"        														}
						 ,"DAY"            	: { headerText : "일"        														}
						 ,"SALES"          	: { headerText : "판매가"    	,dataType : "number"								}
						 ,"SALES_QUANTITY" 	: { headerText : "판매횟수"  														}
					 }
					,primaryKeyList		: ["MENU_SALES_ID"]
					,searchColumnList	: ["A.MENU_NM", "A.STORE_MENU_NM", "DAY"]	
					,orderColumnList 	: ["YEAR","MONTH","DAY", "STORE_MENU_NM"]		
					,searchWhereMap		: {"B.BRAND_ID" : G_VAL.session.BRAND_ID }
					,useRuntimeLoad		: 100
					//,updateOnly			: "Y"
					//,gridWidth			: "1800px"
				 }
				,noTitle 			: "Y"
				,noBreadcrumb		: "Y"
				,optionConfig		: {
					searchComponentList : [
						{
							 type			: "singleSelectBox"	
							,title			: "가맹점"
							,whereColumn	: "A.STORE_ID"
							,optionList 	: selectList
							,defaultVal		: G_VAL.current.storeId
							,onChange		: function(selectVal, thisComp) {
								G_VAL.current.storeId = selectVal;
								thisComp.reload();
							}
						},
						{
							 type			: "multiSelectBox"	
							,title			: "DAY"
							,whereColumn	: "DAY"
							,optionList 	: function(storeId) {
								return [['11','A11'],['12','A12'],['13','13']];
							 }
							,defaultValList	: [11, 12]
						}
						/*
						,{
							 type			: "multiSelectBox"	
							,title			: "상품명"
							,whereColumn	: "PRODUCT_CD"
							,optionList 	: function() {
								var parm = {
									 queryId 		: "headerManage.getStoreMenuList"
									,requestParm	: { 
										 BRAND_ID : G_VAL.session.BRAND_ID 
										,STORE_ID : G_VAL.current.storeId 
									 }
									,noLoadingBar	: "Y"
								}
								let resultData = C_COM.requestQuery(parm);
								dalert(resultData);
								return [['11','A11'],['12','A12'],['13','13']];
							 }
						}
						*/
					]
				 }		
			}
			C_COMP.import("brandMenuManageGrid", "component_compTableEditor",sendParm , function() {});		
		 }
	}
	// Page Load가 완료된후 실행 된다.
	C_PM.onLoadPage("<@pageId>", function(parm) {
		C_COM.getStoreList(G_VAL.session.BRAND_ID, function(selectList) {
			<@pageId>.loadComponent(selectList);	
		});
	});
	// History back으로 이동해왔을 경우 이루틴이 실행된다.
	C_HM.onReturn("<@pageId>", function(pageId, data) {

	});
</script>
<page-component>
    <!-- table area start -->
	<compnent id="brandMenuManageGrid"></compnent>    
    <!-- table area end -->
</page-component>