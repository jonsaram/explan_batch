<meta charset="utf-8">
<script type="text/javascript">
	var <@pageId> = {
		 loadComponent : function(parm) {
			let sendParm = {
				gridParm : {
					 requestQuery 	: {
						  queryId		: "system.getLoginUserMngList"
						 ,requestParm	: {}
					 }	
					,tableName		: "TBL_EXP_LOGIN_USER"
					,columnMap 		: {
						  "LOGIN_ID" 	: { headerText : "로그인ID"	}
						 ,"LOGIN_NM" 	: { headerText : "로그인명"	}
						 ,"USER_ID" 	: { headerText : "사용자ID"	}
						 ,"BUYER_ID" 	: { headerText : "고객ID"	}
						 ,"BRAND_ID" 	: { headerText : "BRAND ID"	}
						 ,"STORE_ID" 	: { headerText : "가맹점CD"	}
						 ,"STORE_NM" 	: { headerText : "가맹점명"	, noSave : "Y"}
						 ,"PASSWD"		: { headerText : "Password"	, noSave : "Y", width : "110px", columnType : "button", buttonNm : "초기화"	, buttonFn : <@pageId>.resetPwd}						 
					 }
					,primaryKeyList		: ["LOGIN_ID"			]
					,searchColumnList	: ["A.LOGIN_ID", "A.LOGIN_NM", "A.STORE_ID", "C.STORE_NM"	]
					,orderColumnList 	: ["A.BUYER_ID", "C.STORE_NM", "A.LOGIN_NM"]
				 }
			}
			C_COMP.import("<@pageId>_editor", "component_compTableEditor",sendParm , function() {});		
		 }
	    ,resetPwd : function(rowNo,rowData){

 			C_POP.confirm("비밀번호를 초기화 하시겠습니까?", function() {
	 			var parm = {
 						queryId 	: "system.resetPwd"
 					   ,requestParm	: rowData
	 			}
	 			
	 			C_COM.requestQuery(parm, function(resultData) {
	 				
	                 if (resultData.state === 'S') {
		             		alert('비밀번호를 초기화하였습니다.\n변경된 비밀번호는 로그인ID 와 동일합니다.');
	                 		$(rowNo).text('초기화 완료')
		 			} else {
	                 	alert('비밀번호 초기화실패하였습니다.\n관리자에게 문의하여 주십시오.');
	     			}
	 			});
	 			
			});			
			
	    }
	
	}
	// Page Load가 완료된후 실행 된다.
	C_PM.onLoadPage("<@pageId>", function(parm) {
		<@pageId>.loadComponent(parm);
	});
	// History back으로 이동해왔을 경우 이루틴이 실행된다.
	C_HM.onReturn("<@pageId>", function(pageId, data) {

	});
</script>
<page-component>
    <!-- table area start -->
	<compnent id="<@pageId>_editor"></compnent>    
    <!-- table area end -->
</page-component>