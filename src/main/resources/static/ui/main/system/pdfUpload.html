<meta charset="utf-8">
<script type="text/javascript">
	var <@pageId> = {
		pdfUpload : function() {

			$("#<@pageId> #errorLog").hide();
			$("#<@pageId> #errorMsg").html("");
			$("#<@pageId> #sheetNum").html("");
			$("#<@pageId> #stopIdx").html("");
			
			C_COM.selectPdfUploadToTable(function(retData) {
				if(retData.state == "S") {
					C_POP.alert('PDF Upload에 성공하였습니다.');
				} else if(retData.state == "E") {
					$("#<@pageId> #errorLog").show();
					
					$("#<@pageId> #errorMsg").html(retData.msg);

					$("#<@pageId> #sheetNum").html(retData.sheetNum);
					
					$("#<@pageId> #stopIdx").html(retData.stopIdx);
					
					if(isValid(retData.dupleNum)) {
						$("#<@pageId> #errorMsg").append(":" + retData.dupleNum);
						
					}
					$('#<@pageId> #scrollwrap').scrollTop($('#<@pageId> #scrollwrap')[0].scrollHeight);
					C_POP.alert('오류가 발생하였습니다.\n\n하단에 오류 메시지를 확인하세요.');
				} else {
					dwrite(retData);
				}
			});
		 }
		,save : function() {
			<@pageId>["<@pageId>_editor"].save(function(returnData) {
				
			});
		}
		,transferData : function() {
			C_COM.processFinAnalStatus(function(retData) {
				if(retData.state == "S") {
					C_POP.alert('PDF Upload에 성공하였습니다.');
				} else if(retData.state == "E") {
					$("#<@pageId> #errorLog").show();
					
					$("#<@pageId> #errorMsg").html(retData.msg);

					$("#<@pageId> #sheetNum").html(retData.sheetNum);
					
					$("#<@pageId> #stopIdx").html(retData.stopIdx);
					
					if(isValid(retData.dupleNum)) {
						$("#<@pageId> #errorMsg").append(":" + retData.dupleNum);
						
					}
					$('#<@pageId> #scrollwrap').scrollTop($('#<@pageId> #scrollwrap')[0].scrollHeight);
					C_POP.alert('오류가 발생하였습니다.\n\n하단에 오류 메시지를 확인하세요.');
				} else {
					dwrite(retData);
				}
			});
		}
	}
	// Page Load가 완료된후 실행 된다.
	C_PM.onLoadPage("<@pageId>", function() {
		
		// 상단 Title 영역
		C_COMP.import("<@pageId>_titleArea", "component_compTitleArea",{} , function() {});

		// 상단 메뉴 Path Import
		C_COMP.import("<@pageId>_breadcrumb", "component_compBreadcrumb",{} , function() {});
		
		let sendParm = {
			gridParm : {
				 tableName		: "TBL_EXP_FIN_PDF_TEMP"
				,columnMap 		: {
					 "SEQ"				: { columnType : "readOnly", headerText : "업로드 순서번호"}
					,"BUYER_ID" 		: { columnType : "readOnly", headerText : "BUYER ID"}
					,"INDENT_DEGREE" 	: { columnType : "readOnly", headerText : "계정 들여쓰기"}
					,"ACCOUNT_GUBUN" 	: { columnType : "readOnly", headerText : "계정구분[01:재무상태표, 02:손익계산서]"}
					,"ACCOUNT_NAME" 	: { columnType : "readOnly", headerText : "계정명"}
					,"YEAR_DATA01" 		: { columnType : "readOnly", headerText : "데이터 01"}
					,"YEAR_DATA02" 		: { columnType : "readOnly", headerText : "데이터 02"}
					,"YEAR_DATA03" 		: { columnType : "readOnly", headerText : "데이터 03"}
				 }
				,rowCntId 			: "<@pageId>_rowCnt"					
				,primaryKeyList		: ["SEQ","BUYER_ID","ACCOUNT_GUBUN"]
				,searchColumnList	: ["ITEM_ID"]
				,orderColumnList 	: ["BUYER_ID ASC","ACCOUNT_GUBUN ASC", "SEQ ASC"]				// Table 지정인경우 적용
			 }
		}
		
		C_COMP.import("<@pageId>_editor", "component_compGrid",sendParm , function(tableList) {
		
		});		

	});
	// History back으로 이동해왔을 경우 이루틴이 실행된다.
	C_HM.onReturn("<@pageId>", function(pageId, data) {

	});
</script>
<page-component>
    <!-- breadcrumb start -->
	<compnent id="<@pageId>_breadcrumb"></compnent>    
    <!-- breadcrumb end -->

    <!-- sub title + button start -->
	<compnent id="<@pageId>_titleArea"></compnent>    
    <!-- sub title + button end -->
    
	<!-- search filter box start -->
	<div class="srch-card mt10">
	    <div class="srch-card-inwrap">
	        <div class="col9 col10-sm srch-card-form" id="<@pageId>_searchArea">
	            <div class="col5 col5-md col10-sm display-h-end mb5">
	                <label class="src-title01">검색어</label>
	                <input type="text" class="form-control form-control-sm col10" id="searchValue" onEnter="<@pageId>.search()">
	            </div> 
	        </div>
	        <div class="col1 col10-sm display-h-end pl-lg-15 mb5">
	            <button class="srch-btn col10 mr10" type="button" onclick="<@pageId>.search()">검 색</button>
	        </div>
	    </div>
	</div>
    <div class="display-between display-sm-between mt10">
        <div class="col4-md col10-sm display-h-end mb5">
        </div>
        <div class="display-w-end col4 col4-md col10-sm mb5">
          <span class="col2-sm w150px txt-r mr10">Total : <span class="txt-red" id="<@pageId>_rowCnt"></span></span>
          <button class="flat-btn col2-sm" type="button" id="<@pageId>_editBtn" onclick="<@pageId>.pdfUpload()">PDF 업로드</button>
          <button class="flat-btn col2-sm" type="button" id="<@pageId>_editBtn" onclick="<@pageId>.save()">저장</button>
          <button class="flat-btn col2-sm" type="button" id="<@pageId>_editBtn" onclick="<@pageId>.transferData()">기업재무분석 이관</button>
        </div>
    </div>
	<!-- search filter box end -->

    <!-- table area start -->
	<div class="tb-card-allwrap col10">
		<div class="card-inwrap">
			<div class="card-cnt-wrap">
				<div class="table-allwrap">
					<compnent id="<@pageId>_editor"></compnent>
				</div>
			</div>
		</div>
	</div>    
    <!-- table area end -->
</page-component>