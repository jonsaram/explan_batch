<meta charset="utf-8">
<script type="text/javascript">
    var <@pageId> = {
          brandId   : G_VAL.session.BRAND_ID
         ,loadComponent : function(parm) {

            // Code List 읽어오기
            var ynCdList = C_COM.getCodeList("YES_OR_NO");

            let sendParm = {
                gridParm : {
                     requestQuery : {
                          queryId       : "storeManage.getStoreAddInfo"
                         ,requestParm   : {}
                     }
                    ,columnMap      : {
                         "STORE_ID"      : { headerText : "지점ID"	  }
                        ,"STORE_NM"      : { headerText : "지점명"}
                        ,"TAXPAL_USE_YN" : { headerText : "세친구 사용 YN"    }
                        ,"SITE_CD"       : { headerText : "사이트 코드"  }
                        ,"SITE_NM"       : { headerText : "사이트 명"     }
                        ,"ID"            : { headerText : "ID"     }
                        ,"PASSWD"        : { headerText : "비밀번호" }
                        ,"CONFIRM_YN"    : { headerText : "인증여부"      }
                     }
                    ,columnConfig   : {
                     }
                    ,primaryKeyList     : ["STORE_ADD_INFO_ID"]
                    ,searchColumnList   : ["STORE_NM"]       // Table 지정인경우 적용
                    ,searchWhereMap     : {"A.BRAND_ID" : G_VAL.session.BRAND_ID}
                    ,orderColumnList    : ["STORE_NM ASC" ,                       ]
                    ,cellMergeList      : [["STORE_ID", "STORE_NM", 1]]
                 }
                ,callbackEditButton : function(parm) {
                    <@pageId>.openEditMultiTable();
                 }
            }
            C_COMP.import("<@pageId>_tableGrid", "component_compTableEditor",sendParm , function() {});     
         }
        ,openEditMultiTable : function() {

            let sendParm = {
                 gridParmFst : {
                     tableName      : "TBL_EXP_STORE_MST"
                    ,columnMap      : {
                         "STORE_ID"         : { headerText : "STORE_ID" }
                        ,"STORE_NM"         : { headerText : "STORE_NM" }
                     }
                    ,primaryKeyList     : ["STORE_ID"                    ]
                    ,searchColumnList   : ["STORE_NM"      ]       // Table 지정인경우 적용
                    ,orderColumnList    : ["STORE_ID ASC"             ]
                    ,readOnly           : "Y"
                 }
                ,gridParmSnd : {
                     tableName      : "TBL_EXP_STORE_ADD_INFO"
                    ,columnMap      : {
                    	 "STORE_ADD_INFO_ID": { headerText : "STORE_ADD_INFO_ID", hidden : "Y", ifNewAutoSet : "random"   }
                        ,"STORE_ID"         : { headerText : "STORE_ID"         , hidden : "Y"                      }
                        ,"SITE_CD"          : { headerText : "SITE_CD"      }
                        ,"SITE_NM"          : { headerText : "SITE_NM"      }
                        ,"ID"               : { headerText : "ID"           }
                        ,"PASSWD"           : { headerText : "PASSWD"       }
                        ,"CONFIRM_YN"       : { headerText : "CONFIRM_YN", readOnly : "Y"   }
                     }
                    ,columnConfig   : {
                     }
                    ,primaryKeyList     : ["STORE_ADD_INFO_ID"      ]
                    ,searchColumnList   : ["SITE_CD" , "SITE_NM"    ]       // Table 지정인경우 적용
                    ,orderColumnList    : ["SITE_CD ASC"         ]
                 }
                ,popupTitle     : "지점추가 정보 편집"
                ,fstGridTitle   : "지점 List"
                ,sndGridTitle   : "추가정보 List"
                ,connectColumn  : ["STORE_ID"]
                ,titleComment   : "( 지점코드 : [STORE_ID/] / [STORE_NM/] )"
            }
            
            C_POP.open("popup_storeManage_storeAddInfoPopup", sendParm, function(retData){
            	dalert(retData);
            });
         }
    }
    // Page Load가 완료된후 실행 된다.
    C_PM.onLoadPage("<@pageId>", function(parm) {
        <@pageId>.loadComponent(parm);
    });
    // History back으로 이동해왔을 경우 이루틴이 실행된다.
    C_HM.onReturn("<@pageId>", function(pageId, data) {

    });
</script>
<page-component>
    <!-- table area start -->
    <compnent id="<@pageId>_tableGrid"></compnent>    
    <!-- table area end -->
</page-component>