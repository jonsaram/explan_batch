<meta charset="utf-8">
<script type="text/javascript">
	var <@pageId> = {
			
		 loadComponent : function(parm) {
			let sendParm = {
				gridParm : {
					 tableName		: "TBL_EXP_BUYER"
					,columnMap 		: {
						 "BUYER_ID" 	: { headerText : "고객ID"					}
						,"BUYER_NM" 	: { headerText : "고객명",	align : "left"	}
						,"USE_YN" 		: { headerText : "사용여부"					}
					 }
					,columnConfig 	: {
					 }
					,rowConfig		: {
						onClickRow : function(rowObj) {

							var parm = {
									 queryId 		: "system.searchLoginLock"
									,requestParm	: {
										 USER_ID 	: rowObj.BUYER_ID
									}
								}
						        C_COM.requestQuery(parm, function(resultData) {
						        	
						        	if(resultData.data.some( d => d.IS_LOCK == 'Y' )){
										C_POP.confirm(`${rowObj.BUYER_NM}의 계정잠금을 해제하시겠습니까? `, function() {

											var parm = {
												 queryId 		: "system.releaseLoginLock"
												,requestParm	: {
													USER_ID 	: rowObj.BUYER_ID
												}
											}
									        C_COM.requestQuery(parm, function(resultData) {
												C_POP.alert('계정 해제 처리되었습니다.');
											});
										});
						        	}
								});
							
						}
					 }
					,primaryKeyList		: ["BUYER_ID"]
					,searchColumnList	: ["BUYER_ID", "BUYER_NM"]
					,orderColumnList 	: ["BUYER_ID"]
				 }
			}
			C_COMP.import("buyerManageGrid", "component_compTableEditor",sendParm , function() {});		
		 }
	}
	// Page Load가 완료된후 실행 된다.
	C_PM.onLoadPage("<@pageId>", function(parm) {
		<@pageId>.loadComponent(parm);
	});
	// History back으로 이동해왔을 경우 이루틴이 실행된다.
	C_HM.onReturn("<@pageId>", function(pageId, data) {

	});
</script>
<page-component>
    <!-- table area start -->
	<compnent id="buyerManageGrid"></compnent>    
    <!-- table area end -->
</page-component>