<meta charset="utf-8">
<script type="text/javascript">
	var <@pageId> = {

		IsProcessing : false
	   ,loadComponent : function(parm) {
			
			let sendParm = {
				gridParm : {
					 tableName		: "TBL_EXP_STORE_MST"
					,columnMap 		: {
						  "BRAND_ID"        : { headerText : "BrandID"     , hidden : "Y", default : G_VAL.session.BRAND_ID		}
						 ,"STORE_ID"		: { headerText : "가맹점ID"    , hidden : "Y"										}
						 ,"STORE_CD"		: { headerText : "가맹점CD"    , notNull : "Y"										}
						 ,"STORE_NM"        : { headerText : "가맹점명"    }
						 ,"ADDRESS"         : { headerText : "주소"        , columnClass:"hide-area"}
						 ,"STORE_MANAGER_NM": { headerText : "담당자명"    }
						 ,"REGION"          : { headerText : "지역"        , columnClass:"hide-area", columnType : "selectbox", useCodeId : "STORE_REGION"	}
						 ,"NOTE"            : { headerText : "Note"        , columnClass:"hide-area"}
						 ,"PHONE_MANAGER"   : { headerText : "대표전화번호", columnClass:"hide-area"}
						 ,"PHONE_STORE"     : { headerText : "지점전화번호"}
                         ,"USE_YN"          : { headerText : "사용여부"		,columnType : "selectbox", useCodeId : "YES_OR_NO"	}
                         //,"TAXPAL_USE_YN"   : { headerText : "세친구사용"	,columnType : "selectbox", useCodeId : "YES_OR_NO"	}
                         //,"TAXPAL_REGIST_YN": { headerText : "세친구등록"	,columnType : "selectbox", useCodeId : "YES_OR_NO"	}
                         ,"POS_USE_YN"      : { headerText : "포스사용"		,columnType : "selectbox", useCodeId : "YES_OR_NO"	}
                         ,"OPENING_DAY"     : { headerText : "개업일"		,dataType : "date", dateFormat : "YYYY-MM-DD"	}
                         ,"CLOSING_DATE"    : { headerText : "폐점일"		,dataType : "date", dateFormat : "YYYY-MM-DD"	}
                         ,"TRANSFER_DAY"    : { headerText : "양수도일"		,dataType : "date", dateFormat : "YYYY-MM-DD"	}
					 }
					,columnConfig 	: {
                        onClickCell        : function(columnId, rowData) {
                            if( columnId == "TAXPAL_REGIST_YN" ) {
                            	<@pageId>.taxpalStoresRegist(rowData);
                            }
                        }
						,onChangeCell : {
							"STORE_CD"	: {
								func : function(gridObj, rowIdx, colIdx, cellObj, rowData) {
									const storeId = `${G_VAL.session.BRAND_ID}_${rowData.STORE_CD}`; 
									gridObj.setCellToColumn(cellObj, storeId, "STORE_ID");
								}
							}
						 }
					 }
					,rowConfig 		: {
					 }
					,primaryKeyList			: ["STORE_ID"]
					,searchColumnList		: ["STORE_ID", "STORE_NM"]		// Table 지정인경우 적용
					,orderColumnList 		: ["STORE_NM ASC"] // ORDER BY에 사용
					,searchWhereMap			: {"BRAND_ID" : G_VAL.session.BRAND_ID	}
					,readOnlyShowColumnList : ["STORE_NM", "ADDRESS", "REGION","PHONE_MANAGER", "PHONE_STORE", "POS_USE_YN", "OPENING_DAY", "CLOSING_DATE", "TRANSFER_DAY" ]
				 }
			}
			C_COMP.import("<@pageId>_tableGrid", "component_compTableEditor",sendParm , function() {});		
		}

       ,taxpalStoresRegist : function(rowData) {
    	   
    	   // 중복 실행 방지
           if ( <@pageId>.IsProcessing ) {
               return;
           }

           <@pageId>.IsProcessing = true; // 실행 시작
           
           let requestParm = {};
           requestParm["brandId"]  = rowData.brandId ;
           requestParm["storeId"]  = rowData.STORE_ID;
           
           var parm = {
                serviceId              : "JobSchedulerService.taxpalStoresRegist"
               ,requestParm            : requestParm
           }
           C_COM.requestService(parm, function(resultData) {
               <@pageId>.IsProcessing = false;
           });
           
        }
	
	}
	// Page Load가 완료된후 실행 된다.
	C_PM.onLoadPage("<@pageId>", function(parm) {
		<@pageId>.loadComponent(parm);
	});
	// History back으로 이동해왔을 경우 이루틴이 실행된다.
	C_HM.onReturn("<@pageId>", function(pageId, data) {

	});
</script>
<page-component>
    <!-- table area start -->
	<compnent id="<@pageId>_tableGrid"></compnent>    
    <!-- table area end -->
</page-component>