<meta charset="utf-8">
<script type="text/javascript">
    var <@pageId> = {
         brandId    : G_VAL.session.BRAND_ID
        ,loadComponent : function(parm) {
        	
        	let yearCodeList = [
          		 ["2026","2026"]
         		,["2025","2025"]
        		,["2024","2024"]
        		,["2023","2023"]
        		,["2022","2022"]
        		,["2021","2021"]
          		,["2020","2020"]
        	]
        	let monthCodeList = [
          		 ["01","01"]
          		,["02","02"]
          		,["03","03"]
          		,["04","04"]
          		,["05","05"]
          		,["06","06"]
          		,["07","07"]
          		,["08","08"]
           		,["09","09"]
           		,["10","10"]
          		,["11","11"]
          		,["12","12"]
        	]
            let sendParm = {
                gridParm : {
                     tableName      : "TBL_EXP_BRAND_BUSINESS_PROFIT_RATIO"
                    ,columnMap      : {
                    	 "UNQ_ID"                 : { headerText : "UNQ_ID"              ,hidden : "Y", ifNewAutoSet : "random"				   		}
		            	,"BRAND_ID"               : { headerText : "Brand ID"            ,hidden : "Y", default : G_VAL.session.BRAND_ID   			}
		            	,"REGIST_YM"              : { headerText : "영업이익률 적용년월" ,hidden : "Y"												}
			            ,"YEAR"		              : { headerText : "영업이익률 적용년" ,columnType : "selectbox", selectBoxCodeList : yearCodeList, tableColumn : "N"
								 						,initSetData : function(cellText, rowData) {
								 							if(isEmpty(rowData.REGIST_YM))  return "";
								 							else                            return rowData.REGIST_YM.substring(0, 4); 
								 						 }	
										             }
			            ,"MONTH"	              : { headerText : "영업이익률 적용월" ,columnType : "selectbox", selectBoxCodeList : monthCodeList, tableColumn : "N"	
								 						,initSetData : function(cellText, rowData) {
                                                            if(isEmpty(rowData.REGIST_YM))  return "";
                                                            else                            return rowData.REGIST_YM.substring(4, 6);
								 						 }	
			            							}
                        ,"BUSINESS_PROFIT_RATIO"  : { headerText : "영업이익률(%)"       ,dataType : "number"                   					}
                     }
                    ,columnConfig   : {
    					onChangeCell : {
    						"YEAR"	: {
    							func : function(gridObj, rowIdx, colIdx, cellObj, rowData) {
    								let setData = rowData.YEAR + rowData.MONTH;
    								gridObj.setCellToColumn(cellObj, setData, "REGIST_YM"	);
   								}						
    						 }
                    		,"MONTH" : {
     							func : function(gridObj, rowIdx, colIdx, cellObj, rowData) {
    								let setData = rowData.YEAR + rowData.MONTH;
    								gridObj.setCellToColumn(cellObj, setData, "REGIST_YM"	);
   								}						
     						 }
    					 }
                     }
                    ,primaryKeyList     : ["UNQ_ID"]
                    ,searchColumnList   : ["REGIST_YM"]
                    ,searchWhereMap     : {BRAND_ID : G_VAL.session.BRAND_ID}
                    ,orderColumnList    : ["REGIST_YM DESC"]
                 }
                ,editPopupMax : "N"
            }
            
            C_COMP.import("ratioGrid", "component_compTableEditor",sendParm , function() {});     
         }
    }
    // Page Load가 완료된후 실행 된다.
    C_PM.onLoadPage("<@pageId>", function(parm) {
        <@pageId>.loadComponent(parm);
    });
    // History back으로 이동해왔을 경우 이루틴이 실행된다.
    C_HM.onReturn("<@pageId>", function(pageId, data) {

    });
</script>
<page-component>
    <!-- table area start -->
    <compnent id="ratioGrid"1></compnent>    
    <!-- table area end -->
</page-component>