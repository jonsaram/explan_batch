<meta charset="utf-8">
<script type="text/javascript">
	var <@pageId> = {
		 brandId	: G_VAL.session.BRAND_ID
		,loadComponent : function(selectList) {

			// Code List 읽어오기
			var group1CdList = C_COM.getBrandCodeList(<@pageId>.brandId, "STORE_MENU_GROUP1");

			let sendParm = {
				gridParm : {
					 requestQuery	: {
						  queryId		: "headerManage.getStoreMenuList"
						 ,requestParm	: {}
					 }
					,tableName		: "TBL_EXP_STORE_MENU_MST"
					,columnMap 		: {
						 "STORE_ID"         : { headerText : "가맹점ID"	, hidden : "Y"	} 
						,"MENU_CD" 			: { headerText : "메뉴CD"					} 
						,"MENU_NM"          : { headerText : "메뉴명"       			} 
						,"BRAND_MENU_CD"  	: { headerText : "본사메뉴CD" 				} 
						,"BRAND_MENU_NM"    : { headerText : "본사메뉴명"				}
						,"GROUP_1_NM"      	: { headerText : "대분류CD"					}
						,"GROUP_2_NM"      	: { headerText : "중분류CD"					}
						,"SELLING_PRICE"    : { headerText : "판매가"					} 
					 }
					,headerTextGroup	: {
						"본사메뉴" : [
							 "BRAND_MENU_CD"
							,"BRAND_MENU_NM"
							,"GROUP_1_NM"   
							,"GROUP_2_NM"   
							,"SELLING_PRICE"
						]
					 }
					,columnConfig : {
					 }
					,primaryKeyList		: ["STORE_ID"]
					,searchColumnList	: ["MENU_CD", "MENU_NM", "BRAND_MENU_CD", "BRAND_MENU_NM"]
					,searchWhereMap		: {"BRAND_ID" : G_VAL.session.BRAND_ID }
					,orderColumnList 	: ["MENU_CD"]				
					,rowCntId			: "<@pageId>_rowCnt"
					,readOnly			: "Y"
				 }
				,optionConfig		: {
					selectBoxForSearchConfig : {
						 title			: "가맹점"
						,whereColumn	: "STORE_ID"
						,targetColumn	: "STORE_NM"
						,optionList 	: selectList
					}
				 }
				,callbackEditButton : function(parm) {
					C_POP.open("popup_storeManage_storeMenuEditPopup", {}, function(retData){
						if(retData.reload == "Y") {
							<@pageId>.reload();
						}
					});
				 }
			
			}
			C_COMP.import("storeMenuManangeGrid", "component_compTableEditor",sendParm , function() {});		
		 }
	}
	// Page Load가 완료된후 실행 된다.
	C_PM.onLoadPage("<@pageId>", function(parm) {

		C_COM.getStoreList(G_VAL.session.BRAND_ID, function(selectList) {
			<@pageId>.loadComponent(selectList);	
		});

	});
	// History back으로 이동해왔을 경우 이루틴이 실행된다.
	C_HM.onReturn("<@pageId>", function(pageId, data) {

	});
</script>
<page-component>
    <!-- table area start -->
	<compnent id="storeMenuManangeGrid"></compnent>    
    <!-- table area end -->
</page-component>