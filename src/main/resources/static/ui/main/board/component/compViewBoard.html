<meta charset="utf-8">
<script type="text/javascript">
	var <@compId> = {
		 boardContent : ''	
		,init:function(){
			
			var parm = {
					 queryId 		: 'board.getBoard'
					,requestParm	: {BOARD_ID: "<@BOARD_ID>"}
			}
			
			C_COM.requestQuery(parm, function(resultData) {
				if( resultData.state == 'S'){

					const board = resultData.data[0];
					<@compId>.boardContent = board.CONTENT;

					$("#<@compId>_updateUser").text( board.CREATE_USER_NM);
					$("#<@compId>_updateDate").text( board.CREATE_DATE);
					$("#<@compId>_cnt").text( board.VIEW_CNT);
					$("#<@compId>_reply").text( board.REPLY_CNT);
					$("#<@compId>_Title").val( board.TITLE);
					C_COMP.import("compTextarea", "component_common_compTextarea",{editable:false,initData: board.CONTENT} , function() {});
				}
			});					
		}
		,valid : function() {
			
			if( isEmpty($("#<@compId>_Title").val())){alert("제목을 입력해주세요.");return false}
			let isAnyData = <@parentId>.compTextarea.isAnyData();
			if( !	isAnyData ){alert("내용을 입력해주세요.");return false}
			
			return true;
		}
		,save : function() {
			if( <@compId>.valid()){
				C_POP.confirm(`수정된 내용을 저장 하시겠습니까?`, function() {
					var parm = {
							 queryId 		: 'board.updateBoard'
							,requestParm	: {
								BOARD_ID: "<@BOARD_ID>"
								,TITLE	: $("#<@compId>_Title").val()
								,CONTENT: <@parentId>.compTextarea.getData()
								,BOARD_MST_ID:''
							}
					}
			
					C_COM.requestQuery(parm, function(resultData) {
						if( resultData.state == 'S'){
							<@parentId>.close();
						}
					});
				});
			}
		}
		,modifyBoard:function(){
			C_COMP.import("compTextarea", "component_common_compTextarea",{editable:true,initData: <@compId>.boardContent} , function() {});

			$("#<@compId>_modify").hide();
			$("#<@compId>_update").show();	
		}
		,deleteBoard:function(){
			C_POP.confirm('이 공지사항을 삭제하시겠습니까?', function() {
				var parm = {
					 queryId 		: "board.deleteBoard"
					,requestParm	: {BOARD_ID: "<@BOARD_ID>"}
				}
				C_COM.requestQuery(parm, function(resultData) {
					if(resultData.state == "S") {
						C_POP.alert('이 공지사항이 삭제되었습니다.');
						<@parentId>.close();
					}					
				});  
			});			
		}
	}
	// Component Load가 완료된후 실행 된다.
	C_COMP.onLoadComp("<@compId>", function(data) {

		$("#<@compId>_modify").show();
		$("#<@compId>_update").hide();
		
		<@compId>.init();

		var parm = {
				 GRP_FILE_ID 	: "<@BOARD_ID>"
				,OWNER_CD 		: "MN_BOARD_MNG"
				,mode			: "M"
				,title			: "NA"
				,templateId		: "<@compId>"
		}
			
		C_COMP.import("<@compId>folderFileMng", "component_compMultiFilemng", parm , function(fileList) {});		
		setTimeout(()=>{
			$("#<@compId>_Title").focus();
		},500);		
	})
</script>
<component>

<div class="display-between display-sm-between col0 col0-md col10-sm">
    <!-- title start -->
    <div class="notice-wr-info col10-sm ml--0 mb10 mt10">
        <span class="msg-date"><b class="mr5">작성자:</b><span id="<@compId>_updateUser"></span></span>
        <span class="msg-date"><b class="mr5">작성일:</b><span id="<@compId>_updateDate"></span></span>
        <span class="msg-date"><b class="mr5">조회:</b><span id="<@compId>_cnt"></span></span>
        <span class="msg-name"><b class="mr5">댓글:</b><span class="txt-red"><span id="<@compId>_reply"></span></span></span>
    </div>
    <!-- button start -->
    <div class="col10-sm display-w-end" style="text-align: right; float: right;">
      <button class="flat-btn mr5" 	type="button" onclick="<@compId>.deleteBoard()">삭제</button>
      <button class="flat-btn" 		type="button" onclick="<@compId>.modifyBoard()" id='<@compId>_modify'>수정</button>
      <button class="flat-btn" 		type="button" onclick="<@compId>.save()"		id='<@compId>_update'>저장</button>
    </div>
</div>


<!-- table area start -->
<div class="tb-card-allwrap02 col10 mt10">
    <div class="card-inwrap">
    <div id="tb-scroll" class="card-cnt-wrap p20">
        <!-- table start -->

        <table class="tb-wr-wrap col10 col10-xs">
            <colgroup>
                <col>
                <col>
            </colgroup>
            <tbody>
                <tr>
                <th class="col1 col2-sm col10-xs">제목</th>
                <td class="col9 col8-sm col10-xs">
                    <input type="text" class="form-control form-control-sm col10" id="<@compId>_Title">
                </td>
                </tr>                      
                <tr>
                <th>내 용</th>
                <td>
					<component id="compTextarea"></component>
                </td>
                </tr>
                <tr>
					<th>첨부파일</th>
                  	<td>
						<div class="tb-wr-addfile col0 col10-md col10-sm col10-xs">
							<component id="<@compId>folderFileMng"></component> 
						</div>
                  	</td>
                </tr>                  
            </tbody>
            </table>
        <!-- table end -->
    </div>
    </div>
</div>
<!-- table area end -->

</component>